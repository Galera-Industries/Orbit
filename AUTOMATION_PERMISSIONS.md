# Настройка разрешений на автоматизацию для Orbit

## Проблема 1: Ошибка -1743
При попытке извлечь содержимое страницы появляется ошибка:
```
Not authorized to send Apple events to Safari
Ошибка -1743
```

## Проблема 2: JavaScript в Safari отключен
После получения разрешения может появиться ошибка:
```
You must enable 'Allow JavaScript from Apple Events' in the Developer section of Safari Settings
```

## Решение

### Способ 1: Автоматический запрос (рекомендуется)
1. Нажмите ⌘⌥M при открытом Safari/Chrome
2. macOS автоматически покажет диалог запроса разрешения
3. Нажмите "Разрешить" в диалоге

### Способ 2: Ручная настройка

#### macOS Ventura (13.0) и новее:
1. Откройте **Системные настройки** (System Settings)
2. Перейдите в **Конфиденциальность и безопасность** → **Автоматизация**
3. Найдите **Orbit** в списке приложений
4. Включите переключатель напротив **Safari** (или **Google Chrome**)

#### macOS Monterey (12.0) и ниже:
1. Откройте **Системные настройки** (System Preferences)
2. Перейдите в **Безопасность и конфиденциальность** → **Конфиденциальность**
3. Выберите **Автоматизация** в левом списке
4. Найдите **Orbit** и включите разрешение для **Safari**/**Chrome**

### Способ 3: Сброс и повторный запрос

Если Orbit не появляется в списке автоматизации:

1. Откройте **Терминал**
2. Выполните команду:
   ```bash
   tccutil reset AppleEvents
   ```
3. Перезапустите Orbit
4. Попробуйте снова нажать ⌘⌥M
5. macOS должен показать диалог запроса разрешения

## Настройка JavaScript в Safari

Если после получения разрешения появляется ошибка о JavaScript:

1. Откройте **Safari**
2. Перейдите в меню **Safari → Settings (Настройки) → Advanced (Дополнения)**
3. Внизу включите чекбокс **"Show Develop menu in menu bar"** (Показывать меню "Разработка")
4. В строке меню появится меню **Develop (Разработка)**
5. Перейдите в **Develop → Allow JavaScript from Apple Events** (Разрешить JavaScript из Apple Events)
6. Попробуйте снова нажать ⌘⌥M

### Важно
- ❌ **sudo не поможет** - это пользовательские настройки безопасности
- ✅ Разрешения запрашиваются автоматически при первой попытке
- ✅ Если диалог не появляется, используйте ручную настройку (Способ 2)
- ✅ После предоставления разрешения и включения JavaScript функция будет работать сразу

